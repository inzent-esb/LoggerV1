import{r as o,u as S,a as k,b as E,c as T,d as C,A as g,e as A,f as R,R as N,C as L,j as e}from"../index.DUkh4MdH.js";import M from"./logo_wh.CMQQTI3M.js";import D from"./fail.DjzYbg5u.js";function U(){const x=o.useRef(null),I=S(),p=k(),{t:s}=E(),[r,u]=o.useState(""),[c,w]=o.useState(""),[f,l]=o.useState(""),[n,h]=o.useState(!1),{openAlert:i}=T(),{openConfirm:y}=C();o.useEffect(()=>(h(localStorage.getItem("saveUserId")!==null),u(localStorage.getItem("saveUserId")||""),sessionStorage.getItem("noMotion")&&(sessionStorage.removeItem("noMotion"),i({type:g.WARNING,message:s("msg.noMotion")})),sessionStorage.getItem("expireToken")&&(sessionStorage.removeItem("expireToken"),i({type:g.WARNING,message:s("msg.validateToken")})),sessionStorage.getItem("noPrivilege")&&(sessionStorage.removeItem("noPrivilege"),i({type:g.WARNING,message:s("msg.noPrivilege")})),document.body.classList.remove(...document.body.classList),document.body.classList.add("login"),x.current.focus(),()=>{document.body.classList.remove(...document.body.classList)}),[]);const m=o.useCallback(async()=>{const{data:{result:t,error:d,object:j},headers:v}=await new I("/api/auth/token").create({param:{userId:r,password:A(c),clientTimeMillis:Date.now()},isViewSpinner:!0,errorMsgCallback(){l(s("msg.error.contact.administrator"))},finallyCallback(){n?localStorage.setItem("saveUserId",r):localStorage.removeItem("saveUserId")}});if(R(localStorage,a=>a==="accessToken"||a==="refreshToken"||a==="tokenExpiration"||a==="saveUserId"),t==="ok")localStorage.setItem("accessToken",`Bearer ${v["x-imanager-access"]}`),localStorage.setItem("refreshToken",v["x-imanager-refresh"]),localStorage.setItem("tokenExpiration",String(j)),localStorage.setItem("motionTime",String(Date.now())),p(N);else if(d&&d[0].className){const a=d[0].className;-1<a.indexOf("CredentialsExpiredException")?y({type:L.WARNING,message:s("msg.password.expired"),fullScreen:!0,callbackFunc:()=>{p(`${N}/password`,{state:{userId:r}})}}):-1<a.indexOf("AccountExpiredException")?l(s("msg.expired.account")):-1<a.indexOf("LockedException")?l(s("msg.exceeded.loginAttempts")):l(s("msg.id.password.entered.incorrectly"))}else l(s("msg.error.contact.administrator"))},[r,c,n]),b=o.useCallback(t=>{t.code==="Enter"&&(t.preventDefault(),m())},[m]);return e.jsxs("div",{id:"login",className:"flex flex-row max-lg:flex-col w-screen h-screen",children:[e.jsx("header",{className:"lg:basis-2/5 lg:max-w-xl lg:justify-center max-lg:w-full max-lg:h-14 max-lg:p-4 bg-[#151826] flex items-center",children:e.jsx("img",{src:M,alt:"INZENT",className:"lg:h-12 max-lg:h-fit "})}),e.jsxs("div",{className:"flex-1 py-24 pl-10 pr-4 flex lg:items-center max-lg:justify-center",children:[e.jsxs("div",{className:"w-72",children:[e.jsx("div",{className:"h-10 mb-6 text-5xl font-black font-mono max-lg:text-center",children:"LOGGER"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"icon-user absolute top-4 left-4"}),e.jsx("input",{type:"text",className:"form-text mb-3 h-12 pl-11",placeholder:s("label.userId"),value:r,onChange:t=>u(t.target.value),onKeyDown:b,ref:x})]}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"icon-lock absolute top-4 left-4"}),e.jsx("input",{type:"password",className:"form-password mb-3 h-12 pl-11",placeholder:s("label.password"),value:c,onChange:t=>w(t.target.value),onKeyDown:b})]}),e.jsxs("label",{className:"form-checkbox",children:[e.jsx("input",{type:"checkbox",checked:n,onChange:()=>h(!n)}),e.jsx("span",{children:s("label.saveId")})]}),f&&e.jsxs("div",{className:"bg-[#ffe5e8] text-[#ed3137] pl-8 pr-2 py-2 rounded text-xs my-3 font-light relative",children:[e.jsx("img",{className:"absolute left-2",src:D})," ",f]}),e.jsx("button",{type:"submit",className:"mt-5 bg-[#ed3137] border-[#ed3137] text-white py-4 px-3 rounded w-full font-bold",onClick:m,children:s("label.login")})]}),e.jsx("p",{className:"absolute bottom-8 text-xs font-black",children:"Â© 2024 INZENT. All rights reserved"})]})]})}export{U as default};
